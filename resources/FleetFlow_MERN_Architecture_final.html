<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FleetFlow: Node.js + React + Express + Prisma Architecture</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
        }
        
        .container {
            max-width: 1500px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }
        
        .tech-stack-badge {
            display: inline-block;
            background: rgba(255,255,255,0.2);
            padding: 10px 20px;
            border-radius: 20px;
            margin: 8px 5px;
            font-size: 0.95em;
            border: 2px solid rgba(255,255,255,0.5);
        }
        
        .content {
            padding: 40px;
        }
        
        .section {
            margin-bottom: 50px;
        }
        
        .section h2 {
            font-size: 2em;
            color: #667eea;
            margin-bottom: 30px;
            padding-bottom: 10px;
            border-bottom: 3px solid #667eea;
        }
        
        .subsection h3 {
            font-size: 1.4em;
            color: #764ba2;
            margin: 25px 0 15px 0;
            padding-left: 15px;
            border-left: 4px solid #764ba2;
        }
        
        .folder-tree {
            background: #f8f9fa;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
            font-size: 0.85em;
            overflow-x: auto;
            line-height: 1.4;
        }
        
        .folder-tree pre {
            margin: 0;
            color: #2c3e50;
        }
        
        .code-block {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 0.75em;
            line-height: 1.3;
            border-left: 4px solid #667eea;
        }
        
        .code-block code {
            display: block;
        }
        
        .entity-box {
            background: #fff9e6;
            border: 2px solid #ff9800;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .entity-box strong {
            color: #ff6f00;
            font-size: 1.1em;
            display: block;
            margin-bottom: 10px;
        }
        
        .highlight {
            background: #fff3cd;
            padding: 20px;
            border-left: 4px solid #ffc107;
            border-radius: 4px;
            margin: 20px 0;
        }
        
        .badge {
            display: inline-block;
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: 600;
            margin-right: 8px;
            margin-bottom: 8px;
        }
        
        .badge-backend {
            background: #e3f2fd;
            color: #1565c0;
        }
        
        .badge-frontend {
            background: #f3e5f5;
            color: #6a1b9a;
        }
        
        .badge-database {
            background: #e8f5e9;
            color: #2e7d32;
        }
        
        .two-column {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 20px 0;
        }
        
        .three-column {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin: 20px 0;
        }
        
        @media (max-width: 1024px) {
            .two-column, .three-column {
                grid-template-columns: 1fr;
            }
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border: 1px solid #ddd;
            margin: 20px 0;
            border-radius: 8px;
            overflow: hidden;
        }
        
        th {
            background: #667eea;
            color: white;
            padding: 14px;
            text-align: left;
            font-weight: 600;
        }
        
        td {
            padding: 12px 14px;
            border-bottom: 1px solid #eee;
            font-size: 0.95em;
        }
        
        tr:hover {
            background: #f8f9fa;
        }
        
        .toc {
            background: #f5f5f5;
            border-radius: 8px;
            padding: 25px;
            margin: 20px 0;
        }
        
        .toc h3 {
            color: #667eea;
            margin-bottom: 15px;
            border-left: 4px solid #667eea;
            padding-left: 15px;
        }
        
        .toc ul {
            list-style: none;
            columns: 2;
        }
        
        .toc li {
            margin: 8px 0;
            break-inside: avoid;
        }
        
        .toc a {
            color: #667eea;
            text-decoration: none;
        }
        
        .toc a:hover {
            text-decoration: underline;
        }
        
        .architecture-flow {
            background: #f9f9f9;
            border: 2px solid #764ba2;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
        }
        
        .flow-item {
            display: inline-block;
            background: #667eea;
            color: white;
            padding: 12px 24px;
            border-radius: 6px;
            margin: 8px;
            font-weight: 600;
        }
        
        .flow-arrow {
            display: inline-block;
            margin: 0 10px;
            font-size: 1.5em;
            color: #764ba2;
        }
        
        footer {
            background: #f5f5f5;
            padding: 20px;
            text-align: center;
            color: #666;
            border-top: 1px solid #ddd;
        }
        
        .file-item {
            background: #f0f4ff;
            border-left: 4px solid #667eea;
            padding: 15px;
            margin: 10px 0;
            border-radius: 4px;
        }
        
        .file-item-title {
            font-weight: bold;
            color: #667eea;
            margin-bottom: 5px;
        }
        
        .file-description {
            color: #555;
            font-size: 0.9em;
            margin: 5px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸš€ FleetFlow System</h1>
            <p>Modular Fleet & Logistics Management System</p>
            <p style="margin-top: 20px; font-size: 0.9em;">
                <span class="tech-stack-badge">âš¡ Node.js</span>
                <span class="tech-stack-badge">âš›ï¸ React</span>
                <span class="tech-stack-badge">ğŸ“¦ Express.js</span>
                <span class="tech-stack-badge">ğŸ”— Prisma ORM</span>
                <span class="tech-stack-badge">ğŸ’¾ PostgreSQL</span>
            </p>
        </div>
        
        <div class="content">
            <!-- Table of Contents -->
            <div class="toc">
                <h3>ğŸ“‘ Navigation</h3>
                <ul>
                    <li><a href="#overview">Project Overview</a></li>
                    <li><a href="#tech-stack">Tech Stack Details</a></li>
                    <li><a href="#architecture">System Architecture</a></li>
                    <li><a href="#folder-structure">Folder Structure</a></li>
                    <li><a href="#backend">Backend (Express + Prisma)</a></li>
                    <li><a href="#frontend">Frontend (React)</a></li>
                    <li><a href="#prisma-schema">Prisma Schema</a></li>
                    <li><a href="#api-endpoints">API Endpoints</a></li>
                    <li><a href="#workflows">Business Workflows</a></li>
                </ul>
            </div>
            
            <!-- Overview -->
            <div class="section" id="overview">
                <h2>ğŸ“‹ Project Overview</h2>
                
                <div class="subsection">
                    <h3>Objective</h3>
                    <p>Build a modern, scalable fleet and logistics management system with a React frontend, Node.js/Express backend, and Prisma ORM for database interactions. The system optimizes vehicle lifecycle management, monitors driver safety, and tracks financial performance in real-time.</p>
                </div>
                
                <div class="subsection">
                    <h3>Core Features</h3>
                    <ul style="margin-left: 30px; margin-top: 15px; line-height: 2;">
                        <li>âœ… Real-time React dashboard with live KPIs</li>
                        <li>âœ… RESTful API with Express.js</li>
                        <li>âœ… Type-safe database ORM with Prisma</li>
                        <li>âœ… Vehicle lifecycle management</li>
                        <li>âœ… Intelligent trip dispatching with validation</li>
                        <li>âœ… Maintenance tracking and scheduling</li>
                        <li>âœ… Driver compliance monitoring</li>
                        <li>âœ… Financial analytics and reporting</li>
                        <li>âœ… JWT-based authentication</li>
                        <li>âœ… WebSocket for real-time updates</li>
                    </ul>
                </div>
            </div>
            
            <!-- Tech Stack -->
            <div class="section" id="tech-stack">
                <h2>âš™ï¸ Technology Stack</h2>
                
                <div class="subsection">
                    <h3>Complete Stack Overview</h3>
                    <div class="three-column">
                        <div class="entity-box">
                            <strong>Frontend</strong>
                            React 18.x<br>
                            Redux Toolkit<br>
                            React Router v6<br>
                            Axios/Fetch<br>
                            Recharts (Analytics)<br>
                            Tailwind CSS<br>
                            Socket.io Client
                        </div>
                        <div class="entity-box">
                            <strong>Backend</strong>
                            Node.js 18+<br>
                            Express.js 4.x<br>
                            Prisma ORM 4.x<br>
                            JWT Authentication<br>
                            Socket.io<br>
                            Multer (File upload)<br>
                            Joi (Validation)
                        </div>
                        <div class="entity-box">
                            <strong>Database</strong>
                            PostgreSQL 14+<br>
                            Prisma Migrations<br>
                            Connection Pooling<br>
                            Full-text Search<br>
                            JSON Support<br>
                            Indexing Strategy<br>
                            Backup & Recovery
                        </div>
                    </div>
                </div>
                
                <div class="subsection">
                    <h3>Why This Stack?</h3>
                    <div class="highlight">
                        <strong>React:</strong> Component-based, reactive UI updates, SEO-friendly with SSR capability<br><br>
                        <strong>Express.js:</strong> Lightweight, fast, middleware-rich, excellent for RESTful APIs<br><br>
                        <strong>Prisma ORM:</strong> Type-safe, auto-generated migrations, excellent developer experience, built-in validation<br><br>
                        <strong>PostgreSQL:</strong> ACID compliance, JSON support, excellent for relational data, scalable
                    </div>
                </div>
            </div>
            
            <!-- Architecture -->
            <div class="section" id="architecture">
                <h2>ğŸ—ï¸ System Architecture</h2>
                
                <div class="subsection">
                    <h3>Data Flow Architecture</h3>
                    <div class="architecture-flow">
                        <div class="flow-item">React UI</div>
                        <div class="flow-arrow">â†•ï¸</div>
                        <div class="flow-item">Express API</div>
                        <div class="flow-arrow">â†•ï¸</div>
                        <div class="flow-item">Prisma Client</div>
                        <div class="flow-arrow">â†•ï¸</div>
                        <div class="flow-item">PostgreSQL</div>
                    </div>
                </div>
                
                <div class="subsection">
                    <h3>Layered Architecture</h3>
                    <div class="two-column">
                        <div class="entity-box">
                            <strong>ğŸ¨ Presentation Layer (React)</strong><br><br>
                            â€¢ Pages (Dashboard, Registry, etc.)<br>
                            â€¢ Components (Reusable UI)<br>
                            â€¢ Redux Store (State Management)<br>
                            â€¢ Custom Hooks<br>
                            â€¢ Context Providers<br>
                            â€¢ CSS/Styling
                        </div>
                        <div class="entity-box">
                            <strong>ğŸ”„ API Layer (Express)</strong><br><br>
                            â€¢ Routes & Controllers<br>
                            â€¢ Middleware (Auth, Validation)<br>
                            â€¢ Business Logic Services<br>
                            â€¢ Error Handling<br>
                            â€¢ Logging<br>
                            â€¢ WebSocket Events
                        </div>
                    </div>
                    <div class="entity-box">
                        <strong>ğŸ—„ï¸ Data Layer (Prisma + PostgreSQL)</strong><br><br>
                        â€¢ Prisma Schema Definition<br>
                        â€¢ Auto-generated migrations<br>
                        â€¢ Relationships & constraints<br>
                        â€¢ Database queries<br>
                        â€¢ Indexes & optimization
                    </div>
                </div>
            </div>
            
            <!-- Folder Structure -->
            <div class="section" id="folder-structure">
                <h2>ğŸ“ Complete Project Structure</h2>
                
                <div class="subsection">
                    <h3>Full Directory Tree</h3>
                    <div class="folder-tree">
                        <pre>FleetFlow/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ index.js                    (Entry point)
â”‚   â”‚   â”œâ”€â”€ server.js                   (Express setup)
â”‚   â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â”‚   â”œâ”€â”€ database.js             (DB config)
â”‚   â”‚   â”‚   â”œâ”€â”€ env.js                  (Environment vars)
â”‚   â”‚   â”‚   â””â”€â”€ constants.js            (Constants)
â”‚   â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â”‚   â”œâ”€â”€ index.js                (Route aggregator)
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.routes.js          (Authentication)
â”‚   â”‚   â”‚   â”œâ”€â”€ vehicle.routes.js       (Vehicle endpoints)
â”‚   â”‚   â”‚   â”œâ”€â”€ trip.routes.js          (Trip endpoints)
â”‚   â”‚   â”‚   â”œâ”€â”€ driver.routes.js        (Driver endpoints)
â”‚   â”‚   â”‚   â”œâ”€â”€ maintenance.routes.js   (Maintenance)
â”‚   â”‚   â”‚   â”œâ”€â”€ expense.routes.js       (Expenses)
â”‚   â”‚   â”‚   â””â”€â”€ analytics.routes.js     (Analytics)
â”‚   â”‚   â”œâ”€â”€ controllers/
â”‚   â”‚   â”‚   â”œâ”€â”€ authController.js       (Auth logic)
â”‚   â”‚   â”‚   â”œâ”€â”€ vehicleController.js    (Vehicle logic)
â”‚   â”‚   â”‚   â”œâ”€â”€ tripController.js       (Trip logic)
â”‚   â”‚   â”‚   â”œâ”€â”€ driverController.js     (Driver logic)
â”‚   â”‚   â”‚   â”œâ”€â”€ maintenanceController.js
â”‚   â”‚   â”‚   â”œâ”€â”€ expenseController.js    
â”‚   â”‚   â”‚   â””â”€â”€ analyticsController.js
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â”œâ”€â”€ authService.js          (Auth business logic)
â”‚   â”‚   â”‚   â”œâ”€â”€ vehicleService.js       (Vehicle business logic)
â”‚   â”‚   â”‚   â”œâ”€â”€ tripService.js          (Trip validation & logic)
â”‚   â”‚   â”‚   â”œâ”€â”€ driverService.js        (Driver compliance)
â”‚   â”‚   â”‚   â”œâ”€â”€ maintenanceService.js
â”‚   â”‚   â”‚   â”œâ”€â”€ expenseService.js
â”‚   â”‚   â”‚   â””â”€â”€ analyticsService.js     (KPI calculations)
â”‚   â”‚   â”œâ”€â”€ middleware/
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.middleware.js      (JWT verification)
â”‚   â”‚   â”‚   â”œâ”€â”€ errorHandler.js         (Error handling)
â”‚   â”‚   â”‚   â”œâ”€â”€ validator.js            (Input validation)
â”‚   â”‚   â”‚   â”œâ”€â”€ logger.js               (Logging)
â”‚   â”‚   â”‚   â””â”€â”€ corsHandler.js          (CORS setup)
â”‚   â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”‚   â”œâ”€â”€ validators.js           (Validation helpers)
â”‚   â”‚   â”‚   â”œâ”€â”€ jwt.js                  (JWT helpers)
â”‚   â”‚   â”‚   â”œâ”€â”€ encryption.js           (Password hashing)
â”‚   â”‚   â”‚   â”œâ”€â”€ errorResponse.js        (Error formatting)
â”‚   â”‚   â”‚   â””â”€â”€ logger.js               (Log utilities)
â”‚   â”‚   â”œâ”€â”€ ws/
â”‚   â”‚   â”‚   â”œâ”€â”€ socket.js               (Socket.io setup)
â”‚   â”‚   â”‚   â””â”€â”€ events/
â”‚   â”‚   â”‚       â”œâ”€â”€ tripEvents.js       (Real-time trip updates)
â”‚   â”‚   â”‚       â”œâ”€â”€ vehicleEvents.js    (Vehicle status updates)
â”‚   â”‚   â”‚       â””â”€â”€ notificationEvents.js
â”‚   â”‚   â””â”€â”€ prisma/
â”‚   â”‚       â”œâ”€â”€ schema.prisma           (DB schema)
â”‚   â”‚       â”œâ”€â”€ migrations/             (Auto-generated)
â”‚   â”‚       â””â”€â”€ seed.js                 (Seed data)
â”‚   â”œâ”€â”€ .env                            (Environment config)
â”‚   â”œâ”€â”€ .env.example
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ prisma/
â”‚   â”‚   â””â”€â”€ schema.prisma
â”‚   â””â”€â”€ README.md
â”‚
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ public/
â”‚   â”‚   â”œâ”€â”€ index.html
â”‚   â”‚   â”œâ”€â”€ favicon.ico
â”‚   â”‚   â””â”€â”€ manifest.json
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ index.js
â”‚   â”‚   â”œâ”€â”€ App.jsx
â”‚   â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”‚   â”œâ”€â”€ LoginPage.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ DashboardPage.jsx       (Command Center)
â”‚   â”‚   â”‚   â”œâ”€â”€ VehicleRegistryPage.jsx (Asset Management)
â”‚   â”‚   â”‚   â”œâ”€â”€ TripDispatcherPage.jsx  (Trip Management)
â”‚   â”‚   â”‚   â”œâ”€â”€ MaintenanceLogsPage.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ DriverProfilesPage.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ AnalyticsPage.jsx       (Reports)
â”‚   â”‚   â”‚   â””â”€â”€ ReportsPage.jsx
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ Layout/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Navbar.jsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Sidebar.jsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Footer.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Dashboard/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ KPICard.jsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ FleetStatus.jsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ TripTable.jsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ AlertBox.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Forms/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AddVehicleForm.jsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ CreateTripForm.jsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AddDriverForm.jsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ MaintenanceForm.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Tables/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ VehicleTable.jsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ TripTable.jsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DriverTable.jsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ DataTable.jsx       (Reusable)
â”‚   â”‚   â”‚   â”œâ”€â”€ Modals/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Modal.jsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ConfirmDialog.jsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ AlertModal.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Charts/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ FuelEfficiencyChart.jsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ROIChart.jsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ FleetUtilizationChart.jsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ RevenueChart.jsx
â”‚   â”‚   â”‚   â””â”€â”€ Common/
â”‚   â”‚   â”‚       â”œâ”€â”€ StatusBadge.jsx
â”‚   â”‚   â”‚       â”œâ”€â”€ LoadingSpinner.jsx
â”‚   â”‚   â”‚       â””â”€â”€ ErrorAlert.jsx
â”‚   â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”‚   â”œâ”€â”€ useAuth.js              (Auth hook)
â”‚   â”‚   â”‚   â”œâ”€â”€ useFetch.js             (API calls)
â”‚   â”‚   â”‚   â”œâ”€â”€ useForm.js              (Form handling)
â”‚   â”‚   â”‚   â”œâ”€â”€ useWebSocket.js         (Real-time)
â”‚   â”‚   â”‚   â””â”€â”€ useLocalStorage.js
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â”œâ”€â”€ api.js                  (Axios instance)
â”‚   â”‚   â”‚   â”œâ”€â”€ authService.js
â”‚   â”‚   â”‚   â”œâ”€â”€ vehicleService.js
â”‚   â”‚   â”‚   â”œâ”€â”€ tripService.js
â”‚   â”‚   â”‚   â”œâ”€â”€ driverService.js
â”‚   â”‚   â”‚   â”œâ”€â”€ maintenanceService.js
â”‚   â”‚   â”‚   â”œâ”€â”€ analyticsService.js
â”‚   â”‚   â”‚   â””â”€â”€ socketService.js
â”‚   â”‚   â”œâ”€â”€ redux/
â”‚   â”‚   â”‚   â”œâ”€â”€ store.js                (Redux setup)
â”‚   â”‚   â”‚   â”œâ”€â”€ slices/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ authSlice.js
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ vehicleSlice.js
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ tripSlice.js
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ driverSlice.js
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ maintenanceSlice.js
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ notificationSlice.js
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ uiSlice.js
â”‚   â”‚   â”‚   â””â”€â”€ actions/
â”‚   â”‚   â”‚       â”œâ”€â”€ authActions.js
â”‚   â”‚   â”‚       â”œâ”€â”€ vehicleActions.js
â”‚   â”‚   â”‚       â””â”€â”€ tripActions.js
â”‚   â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”‚   â”œâ”€â”€ formatters.js           (Date, number format)
â”‚   â”‚   â”‚   â”œâ”€â”€ validators.js           (Form validation)
â”‚   â”‚   â”‚   â”œâ”€â”€ constants.js            (App constants)
â”‚   â”‚   â”‚   â”œâ”€â”€ errorHandler.js
â”‚   â”‚   â”‚   â””â”€â”€ helpers.js              (Utility functions)
â”‚   â”‚   â”œâ”€â”€ styles/
â”‚   â”‚   â”‚   â”œâ”€â”€ index.css
â”‚   â”‚   â”‚   â”œâ”€â”€ tailwind.config.js
â”‚   â”‚   â”‚   â”œâ”€â”€ variables.css
â”‚   â”‚   â”‚   â””â”€â”€ components.css
â”‚   â”‚   â””â”€â”€ context/
â”‚   â”‚       â”œâ”€â”€ AuthContext.jsx
â”‚   â”‚       â”œâ”€â”€ NotificationContext.jsx
â”‚   â”‚       â””â”€â”€ ThemeContext.jsx
â”‚   â”œâ”€â”€ .env                            (Frontend env)
â”‚   â”œâ”€â”€ .env.example
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ package-lock.json
â”‚   â””â”€â”€ README.md
â”‚
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ API_DOCUMENTATION.md
â”‚   â”œâ”€â”€ SETUP_GUIDE.md
â”‚   â”œâ”€â”€ DEPLOYMENT.md
â”‚   â”œâ”€â”€ ARCHITECTURE.md
â”‚   â””â”€â”€ CONTRIBUTING.md
â”‚
â”œâ”€â”€ .gitignore
â”œâ”€â”€ .dockerignore
â”œâ”€â”€ docker-compose.yml                 (Dev environment)
â”œâ”€â”€ Dockerfile.backend
â”œâ”€â”€ Dockerfile.frontend
â””â”€â”€ README.md                           (Main readme)                </div>
            </div>
            
            <!-- Prisma Schema -->
            <div class="section" id="prisma-schema">
                <h2>ğŸ—„ï¸ Prisma Schema & Database Design</h2>
                
                <div class="subsection">
                    <h3>Complete Prisma Schema</h3>
                    
                    <div class="entity-box">
                        <strong>User Model - Authentication & Authorization</strong>
                        <div class="code-block"><code>model User {
  id        Int     @id @default(autoincrement())
  username  String  @unique
  email     String  @unique
  passwordHash String
  firstName String
  lastName  String
  role      Role    @default(DISPATCHER) // MANAGER, DISPATCHER, SAFETY_OFFICER, ANALYST
  status    String  @default("Active") // Active, Inactive, Suspended
  
  createdDate   DateTime @default(now())
  lastLogin     DateTime?
  updatedAt     DateTime @updatedAt
  
  vehicles      Vehicle[]
  createdTrips  Trip[]
  notifications Notification[]
  
  @@index([email])
  @@index([role])
}

enum Role {
  MANAGER
  DISPATCHER
  SAFETY_OFFICER
  ANALYST
}</code></div>
                    </div>
                    
                    <div class="entity-box">
                        <strong>Vehicle Model - Asset Management</strong>
                        <div class="code-block"><code>model Vehicle {
  id                Int     @id @default(autoincrement())
  licensePlate      String  @unique
  name              String
  vehicleType       String  // "Truck", "Van", "Bike"
  model             String
  maxCapacityKg     Float
  currentOdometer   Float   @default(0)
  acquisitionCost   Float?
  status            String  @default("Available")
  // Available, On Trip, In Shop, Out of Service
  
  createdDate       DateTime @default(now())
  updatedAt         DateTime @updatedAt
  createdById       Int
  createdBy         User     @relation(fields: [createdById], references: [id])
  
  trips             Trip[]
  maintenanceLogs   MaintenanceLog[]
  expenses          Expense[]
  
  @@index([status])
  @@index([licensePlate])
  @@index([vehicleType])
}

enum VehicleStatus {
  AVAILABLE
  ON_TRIP
  IN_SHOP
  OUT_OF_SERVICE
}</code></div>
                    </div>
                    
                    <div class="entity-box">
                        <strong>Driver Model - HR & Compliance</strong>
                        <div class="code-block"><code>model Driver {
  id                Int     @id @default(autoincrement())
  name              String
  email             String  @unique
  phone             String
  licenseNumber     String  @unique
  licenseExpiryDate DateTime
  licenseCategory   String  // "LMV", "HMV", "Both"
  status            String  @default("On Duty")
  // On Duty, Off Duty, Suspended
  
  safetyScore       Float   @default(0)
  tripsCompleted    Int     @default(0)
  complaintsCount   Int     @default(0)
  
  createdDate       DateTime @default(now())
  updatedAt         DateTime @updatedAt
  
  trips             Trip[]
  
  @@index([status])
  @@index([licenseExpiryDate])
}

enum DriverStatus {
  ON_DUTY
  OFF_DUTY
  SUSPENDED
}</code></div>
                    </div>
                    
                    <div class="entity-box">
                        <strong>Trip Model - Dispatch Management</strong>
                        <div class="code-block"><code>model Trip {
  id                Int     @id @default(autoincrement())
  tripNumber        String  @unique @default(cuid())
  vehicleId         Int
  driverId          Int
  cargoWeightKg     Float
  originAddress     String
  destinationAddress String
  estimatedFuelCost Float
  
  status            String  @default("Draft")
  // Draft, Dispatched, Completed, Cancelled
  
  startOdometer     Float?
  endOdometer       Float?
  tripStartTime     DateTime?
  tripEndTime       DateTime?
  
  createdDate       DateTime @default(now())
  updatedAt         DateTime @updatedAt
  
  vehicle           Vehicle @relation(fields: [vehicleId], references: [id])
  driver            Driver  @relation(fields: [driverId], references: [id])
  expenses          Expense[]
  
  @@index([status])
  @@index([vehicleId])
  @@index([driverId])
  @@index([createdDate])
}

enum TripStatus {
  DRAFT
  DISPATCHED
  COMPLETED
  CANCELLED
}</code></div>
                    </div>
                    
                    <div class="entity-box">
                        <strong>MaintenanceLog Model - Service Tracking</strong>
                        <div class="code-block"><code>model MaintenanceLog {
  id                Int     @id @default(autoincrement())
  vehicleId         Int
  issueType         String
  description       String?
  cost              Float
  serviceDate       DateTime
  completedDate     DateTime?
  status            String  @default("Pending")
  // Pending, In Progress, Completed
  
  technicianName    String?
  createdDate       DateTime @default(now())
  updatedAt         DateTime @updatedAt
  
  vehicle           Vehicle @relation(fields: [vehicleId], references: [id])
  
  @@index([vehicleId])
  @@index([status])
}

enum MaintenanceStatus {
  PENDING
  IN_PROGRESS
  COMPLETED
}</code></div>
                    </div>
                    
                    <div class="entity-box">
                        <strong>Expense Model - Financial Tracking</strong>
                        <div class="code-block"><code>model Expense {
  id                Int     @id @default(autoincrement())
  vehicleId         Int
  tripId            Int?
  expenseType       String  // "Fuel", "Maintenance", "Other"
  amount            Float
  quantity          Float?
  unit              String?
  
  expenseDate       DateTime
  notes             String?
  createdDate       DateTime @default(now())
  updatedAt         DateTime @updatedAt
  
  vehicle           Vehicle @relation(fields: [vehicleId], references: [id])
  trip              Trip?   @relation(fields: [tripId], references: [id])
  
  @@index([vehicleId])
  @@index([expenseType])
  @@index([expenseDate])
}

enum ExpenseType {
  FUEL
  MAINTENANCE
  OTHER
}</code></div>
                    </div>
                    
                    <div class="entity-box">
                        <strong>Notification Model - Real-time Alerts</strong>
                        <div class="code-block"><code>model Notification {
  id                Int     @id @default(autoincrement())
  userId            Int
  title             String
  message           String
  type              String  // "Alert", "Info", "Warning", "Error"
  isRead            Boolean @default(false)
  
  createdDate       DateTime @default(now())
  
  user              User    @relation(fields: [userId], references: [id])
  
  @@index([userId])
  @@index([isRead])
}</code></div>
                    </div>
                </div>
            </div>
            
            <!-- Backend Section -->
            <div class="section" id="backend">
                <h2>âš™ï¸ Backend Implementation (Express + Prisma)</h2>
                
                <div class="subsection">
                    <h3>Express Server Setup (server.js)</h3>
                    <div class="code-block"><code>import express from 'express';
import cors from 'cors';
import dotenv from 'dotenv';
import { PrismaClient } from '@prisma/client';
import authRoutes from './routes/auth.routes.js';
import vehicleRoutes from './routes/vehicle.routes.js';
import tripRoutes from './routes/trip.routes.js';
import driverRoutes from './routes/driver.routes.js';
import analyticsRoutes from './routes/analytics.routes.js';
import errorHandler from './middleware/errorHandler.js';
import { authMiddleware } from './middleware/auth.middleware.js';
import { socketSetup } from './ws/socket.js';
import http from 'http';
import { Server as SocketIOServer } from 'socket.io';

dotenv.config();

const app = express();
const server = http.createServer(app);
const io = new SocketIOServer(server, {
  cors: { origin: process.env.FRONTEND_URL }
});

const prisma = new PrismaClient();

// Middleware
app.use(express.json({ limit: '50mb' }));
app.use(express.urlencoded({ limit: '50mb', extended: true }));
app.use(cors({
  origin: process.env.FRONTEND_URL,
  credentials: true
}));

// Routes
app.use('/api/auth', authRoutes);
app.use('/api/vehicles', authMiddleware, vehicleRoutes);
app.use('/api/trips', authMiddleware, tripRoutes);
app.use('/api/drivers', authMiddleware, driverRoutes);
app.use('/api/analytics', authMiddleware, analyticsRoutes);

// Health check
app.get('/api/health', (req, res) => {
  res.json({ status: 'OK', timestamp: new Date() });
});

// Error handling
app.use(errorHandler);

// WebSocket setup
socketSetup(io, prisma);

const PORT = process.env.PORT || 5000;
server.listen(PORT, () => {
  console.log(`Server running on port ${PORT}`);
});</code></div>
                </div>
                
                <div class="subsection">
                    <h3>Authentication Service (authService.js)</h3>
                    <div class="code-block"><code>import bcrypt from 'bcryptjs';
import jwt from 'jsonwebtoken';
import { PrismaClient } from '@prisma/client';

const prisma = new PrismaClient();

export const authService = {
  // Register new user
  register: async (userData) => {
    const { username, email, password, firstName, lastName, role } = userData;
    
    // Check if user exists
    const existingUser = await prisma.user.findFirst({
      where: { OR: [{ email }, { username }] }
    });
    
    if (existingUser) {
      throw new Error('User already exists');
    }
    
    // Hash password
    const hashedPassword = await bcrypt.hash(password, 10);
    
    // Create user
    const user = await prisma.user.create({
      data: {
        username,
        email,
        passwordHash: hashedPassword,
        firstName,
        lastName,
        role
      }
    });
    
    return { id: user.id, email: user.email, role: user.role };
  },

  // Login user
  login: async (username, password) => {
    const user = await prisma.user.findUnique({
      where: { username }
    });
    
    if (!user) {
      throw new Error('Invalid credentials');
    }
    
    // Verify password
    const isValidPassword = await bcrypt.compare(password, user.passwordHash);
    if (!isValidPassword) {
      throw new Error('Invalid credentials');
    }
    
    // Update last login
    await prisma.user.update({
      where: { id: user.id },
      data: { lastLogin: new Date() }
    });
    
    // Generate tokens
    const accessToken = jwt.sign(
      { userId: user.id, role: user.role },
      process.env.JWT_SECRET,
      { expiresIn: '24h' }
    );
    
    const refreshToken = jwt.sign(
      { userId: user.id },
      process.env.JWT_REFRESH_SECRET,
      { expiresIn: '7d' }
    );
    
    return {
      accessToken,
      refreshToken,
      user: {
        id: user.id,
        username: user.username,
        email: user.email,
        role: user.role,
        firstName: user.firstName,
        lastName: user.lastName
      }
    };
  },

  // Verify token
  verifyToken: (token) => {
    return jwt.verify(token, process.env.JWT_SECRET);
  }
};</code></div>
                </div>
                
                <div class="subsection">
                    <h3>Vehicle Service (vehicleService.js)</h3>
                    <div class="code-block"><code>import { PrismaClient } from '@prisma/client';

const prisma = new PrismaClient();

export const vehicleService = {
  // Get all vehicles with filters
  getVehicles: async (filters = {}) => {
    const where = {};
    if (filters.status) where.status = filters.status;
    if (filters.vehicleType) where.vehicleType = filters.vehicleType;
    
    return prisma.vehicle.findMany({
      where,
      include: { createdBy: { select: { username: true } } },
      orderBy: { createdDate: 'desc' }
    });
  },

  // Get single vehicle
  getVehicleById: async (id) => {
    return prisma.vehicle.findUnique({
      where: { id },
      include: {
        createdBy: { select: { username: true } },
        trips: { take: 10, orderBy: { createdDate: 'desc' } },
        maintenanceLogs: { take: 10, orderBy: { createdDate: 'desc' } },
        expenses: { take: 10, orderBy: { expenseDate: 'desc' } }
      }
    });
  },

  // Add new vehicle
  addVehicle: async (vehicleData, userId) => {
    return prisma.vehicle.create({
      data: {
        ...vehicleData,
        createdById: userId
      }
    });
  },

  // Update vehicle
  updateVehicle: async (id, vehicleData) => {
    return prisma.vehicle.update({
      where: { id },
      data: vehicleData
    });
  },

  // Delete vehicle
  deleteVehicle: async (id) => {
    // Check if vehicle has active trips
    const activeTrips = await prisma.trip.count({
      where: { vehicleId: id, status: { in: ['Draft', 'Dispatched'] } }
    });
    
    if (activeTrips > 0) {
      throw new Error('Cannot delete vehicle with active trips');
    }
    
    return prisma.vehicle.delete({ where: { id } });
  },

  // Check availability
  checkAvailability: async (vehicleId) => {
    const vehicle = await prisma.vehicle.findUnique({
      where: { id: vehicleId }
    });
    
    return {
      available: vehicle.status === 'Available',
      vehicle
    };
  }
};</code></div>
                </div>
                
                <div class="subsection">
                    <h3>Trip Service with Validation (tripService.js)</h3>
                    <div class="code-block"><code>import { PrismaClient } from '@prisma/client';

const prisma = new PrismaClient();

export const tripService = {
  // Validate trip creation
  validateTrip: async (tripData) => {
    const errors = [];
    
    // Get vehicle
    const vehicle = await prisma.vehicle.findUnique({
      where: { id: tripData.vehicleId }
    });
    
    if (!vehicle) {
      errors.push('Vehicle not found');
      return { isValid: false, errors };
    }
    
    // Check capacity
    if (tripData.cargoWeightKg > vehicle.maxCapacityKg) {
      errors.push(`Cargo weight (${tripData.cargoWeightKg}kg) exceeds vehicle capacity (${vehicle.maxCapacityKg}kg)`);
    }
    
    // Check vehicle availability
    if (vehicle.status !== 'Available') {
      errors.push(`Vehicle is ${vehicle.status}`);
    }
    
    // Get driver
    const driver = await prisma.driver.findUnique({
      where: { id: tripData.driverId }
    });
    
    if (!driver) {
      errors.push('Driver not found');
      return { isValid: false, errors };
    }
    
    // Check driver status
    if (driver.status === 'Suspended') {
      errors.push('Driver is suspended');
    }
    
    // Check license expiry
    if (new Date(driver.licenseExpiryDate) < new Date()) {
      errors.push('Driver license has expired');
    }
    
    return {
      isValid: errors.length === 0,
      errors,
      vehicle,
      driver
    };
  },

  // Create trip
  createTrip: async (tripData) => {
    const validation = await this.validateTrip(tripData);
    
    if (!validation.isValid) {
      throw new Error(validation.errors.join(', '));
    }
    
    return prisma.trip.create({
      data: tripData
    });
  },

  // Dispatch trip
  dispatchTrip: async (tripId, startOdometer) => {
    const trip = await prisma.trip.findUnique({
      where: { id: tripId },
      include: { vehicle: true, driver: true }
    });
    
    if (!trip) throw new Error('Trip not found');
    
    // Update trip status
    const updatedTrip = await prisma.trip.update({
      where: { id: tripId },
      data: {
        status: 'Dispatched',
        startOdometer,
        tripStartTime: new Date()
      }
    });
    
    // Update vehicle status
    await prisma.vehicle.update({
      where: { id: trip.vehicleId },
      data: { status: 'On Trip' }
    });
    
    // Update driver status
    await prisma.driver.update({
      where: { id: trip.driverId },
      data: { status: 'On Duty' }
    });
    
    return updatedTrip;
  },

  // Complete trip
  completeTrip: async (tripId, endOdometer) => {
    const trip = await prisma.trip.findUnique({
      where: { id: tripId },
      include: { vehicle: true, driver: true }
    });
    
    if (!trip) throw new Error('Trip not found');
    
    // Update trip
    const updatedTrip = await prisma.trip.update({
      where: { id: tripId },
      data: {
        status: 'Completed',
        endOdometer,
        tripEndTime: new Date()
      }
    });
    
    // Update vehicle
    await prisma.vehicle.update({
      where: { id: trip.vehicleId },
      data: {
        status: 'Available',
        currentOdometer: endOdometer
      }
    });
    
    // Update driver
    await prisma.driver.update({
      where: { id: trip.driverId },
      data: {
        status: 'Off Duty',
        tripsCompleted: { increment: 1 }
      }
    });
    
    return updatedTrip;
  }
};</code></div>
                </div>
                
                <div class="subsection">
                    <h3>Analytics Service (analyticsService.js)</h3>
                    <div class="code-block"><code>import { PrismaClient } from '@prisma/client';

const prisma = new PrismaClient();

export const analyticsService = {
  // Get fleet KPIs
  getFleetKPI: async () => {
    const activeFleet = await prisma.vehicle.count({
      where: { status: 'On Trip' }
    });
    
    const maintenanceAlerts = await prisma.vehicle.count({
      where: { status: 'In Shop' }
    });
    
    const totalVehicles = await prisma.vehicle.count({
      where: { status: { not: 'Out of Service' } }
    });
    
    const pendingCargo = await prisma.trip.count({
      where: { status: 'Draft' }
    });
    
    const utilizationRate = totalVehicles > 0 
      ? (activeFleet / totalVehicles) * 100 
      : 0;
    
    return {
      activeFleet,
      maintenanceAlerts,
      utilizationRate: Math.round(utilizationRate * 100) / 100,
      pendingCargo,
      totalVehicles
    };
  },

  // Calculate fuel efficiency
  calculateFuelEfficiency: async (vehicleId) => {
    const trips = await prisma.trip.findMany({
      where: { vehicleId, status: 'Completed' }
    });
    
    const totalDistance = trips.reduce((sum, trip) => {
      return sum + (trip.endOdometer - trip.startOdometer || 0);
    }, 0);
    
    const expenses = await prisma.expense.findMany({
      where: { vehicleId, expenseType: 'Fuel' }
    });
    
    const totalFuelLiters = expenses.reduce((sum, exp) => sum + (exp.quantity || 0), 0);
    
    const efficiency = totalFuelLiters > 0 ? totalDistance / totalFuelLiters : 0;
    
    return {
      distance: totalDistance,
      fuelLiters: totalFuelLiters,
      efficiency: Math.round(efficiency * 100) / 100
    };
  },

  // Calculate vehicle ROI
  calculateVehicleROI: async (vehicleId) => {
    const vehicle = await prisma.vehicle.findUnique({
      where: { id: vehicleId }
    });
    
    const expenses = await prisma.expense.findMany({
      where: { vehicleId }
    });
    
    const totalCost = expenses.reduce((sum, exp) => sum + exp.amount, 0);
    
    const trips = await prisma.trip.findMany({
      where: { vehicleId, status: 'Completed' }
    });
    
    const totalRevenue = trips.reduce((sum, trip) => sum + (trip.estimatedFuelCost || 0), 0);
    
    const roi = vehicle.acquisitionCost > 0
      ? ((totalRevenue - totalCost) / vehicle.acquisitionCost) * 100
      : 0;
    
    return {
      acquisitionCost: vehicle.acquisitionCost,
      totalRevenue,
      totalCost,
      roi: Math.round(roi * 100) / 100
    };
  }
};</code></div>
                </div>
                
                <div class="subsection">
                    <h3>Authentication Middleware (auth.middleware.js)</h3>
                    <div class="code-block"><code>import jwt from 'jsonwebtoken';

export const authMiddleware = (req, res, next) => {
  const token = req.headers.authorization?.split(' ')[1];
  
  if (!token) {
    return res.status(401).json({ error: 'No token provided' });
  }
  
  try {
    const decoded = jwt.verify(token, process.env.JWT_SECRET);
    req.user = decoded;
    next();
  } catch (error) {
    res.status(401).json({ error: 'Invalid token' });
  }
};

export const roleMiddleware = (allowedRoles) => {
  return (req, res, next) => {
    if (!allowedRoles.includes(req.user.role)) {
      return res.status(403).json({ error: 'Access denied' });
    }
    next();
  };
};</code></div>
                </div>
            </div>
            
            <!-- Frontend Section -->
            <div class="section" id="frontend">
                <h2>âš›ï¸ Frontend Implementation (React)</h2>
                
                <div class="subsection">
                    <h3>Redux Store Setup (store.js)</h3>
                    <div class="code-block"><code>import { configureStore } from '@reduxjs/toolkit';
import authReducer from './slices/authSlice';
import vehicleReducer from './slices/vehicleSlice';
import tripReducer from './slices/tripSlice';
import driverReducer from './slices/driverSlice';
import maintenanceReducer from './slices/maintenanceSlice';
import notificationReducer from './slices/notificationSlice';
import uiReducer from './slices/uiSlice';

export const store = configureStore({
  reducer: {
    auth: authReducer,
    vehicles: vehicleReducer,
    trips: tripReducer,
    drivers: driverReducer,
    maintenance: maintenanceReducer,
    notifications: notificationReducer,
    ui: uiReducer
  },
  middleware: (getDefaultMiddleware) =>
    getDefaultMiddleware({
      serializableCheck: {
        ignoredActions: ['notifications/addNotification'],
        ignoredPaths: ['notifications.items']
      }
    })
});</code></div>
                </div>
                
                <div class="subsection">
                    <h3>Auth Slice (authSlice.js)</h3>
                    <div class="code-block"><code>import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';
import * as authService from '../../services/authService';

export const loginUser = createAsyncThunk(
  'auth/loginUser',
  async (credentials, { rejectWithValue }) => {
    try {
      const response = await authService.login(credentials);
      localStorage.setItem('token', response.accessToken);
      localStorage.setItem('user', JSON.stringify(response.user));
      return response;
    } catch (error) {
      return rejectWithValue(error.message);
    }
  }
);

const authSlice = createSlice({
  name: 'auth',
  initialState: {
    user: JSON.parse(localStorage.getItem('user')) || null,
    token: localStorage.getItem('token') || null,
    loading: false,
    error: null
  },
  reducers: {
    logout: (state) => {
      state.user = null;
      state.token = null;
      localStorage.removeItem('token');
      localStorage.removeItem('user');
    }
  },
  extraReducers: (builder) => {
    builder
      .addCase(loginUser.pending, (state) => {
        state.loading = true;
        state.error = null;
      })
      .addCase(loginUser.fulfilled, (state, action) => {
        state.loading = false;
        state.user = action.payload.user;
        state.token = action.payload.accessToken;
      })
      .addCase(loginUser.rejected, (state, action) => {
        state.loading = false;
        state.error = action.payload;
      });
  }
});

export const { logout } = authSlice.actions;
export default authSlice.reducer;</code></div>
                </div>
                
                <div class="subsection">
                    <h3>Custom Hook - useFetch (useFetch.js)</h3>
                    <div class="code-block"><code>import { useState, useEffect } from 'react';
import axios from 'axios';

export const useFetch = (url, options = {}) => {
  const [data, setData] = useState(null);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);

  const fetchData = async () => {
    try {
      setLoading(true);
      const token = localStorage.getItem('token');
      const response = await axios.get(url, {
        headers: {
          Authorization: `Bearer ${token}`
        },
        ...options
      });
      setData(response.data);
      setError(null);
    } catch (err) {
      setError(err.message);
      setData(null);
    } finally {
      setLoading(false);
    }
  };

  useEffect(() => {
    fetchData();
  }, [url]);

  return { data, loading, error, refetch: fetchData };
};</code></div>
                </div>
                
                <div class="subsection">
                    <h3>Dashboard Component (DashboardPage.jsx)</h3>
                    <div class="code-block"><code>import React, { useEffect } from 'react';
import { useDispatch, useSelector } from 'react-redux';
import { fetchFleetKPI } from '../redux/slices/analyticsSlice';
import KPICard from '../components/Dashboard/KPICard';
import FleetStatus from '../components/Dashboard/FleetStatus';
import TripTable from '../components/Tables/TripTable';

const DashboardPage = () => {
  const dispatch = useDispatch();
  const { kpi, loading } = useSelector(state => state.analytics);

  useEffect(() => {
    dispatch(fetchFleetKPI());
    // Refresh every 30 seconds
    const interval = setInterval(() => {
      dispatch(fetchFleetKPI());
    }, 30000);
    
    return () => clearInterval(interval);
  }, [dispatch]);

  if (loading) return <div>Loading...</div>;

  return (
    <div className="dashboard-container p-6">
      <h1 className="text-3xl font-bold mb-8">Command Center</h1>
      
      <div className="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
        <KPICard 
          title="Active Fleet"
          value={kpi.activeFleet}
          icon="ğŸš—"
          color="blue"
        />
        <KPICard 
          title="Maintenance Alerts"
          value={kpi.maintenanceAlerts}
          icon="âš ï¸"
          color="red"
        />
        <KPICard 
          title="Utilization Rate"
          value={`${kpi.utilizationRate}%`}
          icon="ğŸ“Š"
          color="green"
        />
        <KPICard 
          title="Pending Cargo"
          value={kpi.pendingCargo}
          icon="ğŸ“¦"
          color="yellow"
        />
      </div>
      
      <FleetStatus vehicles={kpi.activeFleet} />
      <TripTable />
    </div>
  );
};

export default DashboardPage;</code></div>
                </div>
                
                <div class="subsection">
                    <h3>Create Trip Form Component (CreateTripForm.jsx)</h3>
                    <div class="code-block"><code>import React, { useState, useEffect } from 'react';
import { useDispatch } from 'react-redux';
import { createTrip } from '../redux/slices/tripSlice';
import { useFetch } from '../hooks/useFetch';

const CreateTripForm = ({ onClose }) => {
  const [formData, setFormData] = useState({
    vehicleId: '',
    driverId: '',
    cargoWeightKg: '',
    originAddress: '',
    destinationAddress: '',
    estimatedFuelCost: ''
  });
  
  const [errors, setErrors] = useState({});
  const dispatch = useDispatch();
  const { data: vehicles } = useFetch('/api/vehicles');
  const { data: drivers } = useFetch('/api/drivers');

  const handleChange = (e) => {
    const { name, value } = e.target;
    setFormData(prev => ({
      ...prev,
      [name]: value
    }));
  };

  const validateForm = async () => {
    const newErrors = {};
    
    if (!formData.vehicleId) newErrors.vehicleId = 'Vehicle required';
    if (!formData.driverId) newErrors.driverId = 'Driver required';
    if (!formData.cargoWeightKg || parseFloat(formData.cargoWeightKg) <= 0) 
      newErrors.cargoWeightKg = 'Valid weight required';
    if (!formData.originAddress) newErrors.originAddress = 'Origin required';
    if (!formData.destinationAddress) newErrors.destinationAddress = 'Destination required';
    
    setErrors(newErrors);
    return Object.keys(newErrors).length === 0;
  };

  const handleSubmit = async (e) => {
    e.preventDefault();
    
    if (await validateForm()) {
      dispatch(createTrip(formData)).then(() => {
        onClose();
      });
    }
  };

  return (
    <form onSubmit={handleSubmit} className="space-y-4">
      <select
        name="vehicleId"
        value={formData.vehicleId}
        onChange={handleChange}
        className="w-full border rounded p-2"
      >
        <option>Select Vehicle</option>
        {vehicles?.map(v => (
          <option key={v.id} value={v.id}>
            {v.name} - {v.licensePlate}
          </option>
        ))}
      </select>
      {errors.vehicleId && <p className="text-red-500">{errors.vehicleId}</p>}
      
      <select
        name="driverId"
        value={formData.driverId}
        onChange={handleChange}
        className="w-full border rounded p-2"
      >
        <option>Select Driver</option>
        {drivers?.map(d => (
          <option key={d.id} value={d.id}>
            {d.name}
          </option>
        ))}
      </select>
      {errors.driverId && <p className="text-red-500">{errors.driverId}</p>}
      
      <input
        type="number"
        name="cargoWeightKg"
        placeholder="Cargo Weight (kg)"
        value={formData.cargoWeightKg}
        onChange={handleChange}
        className="w-full border rounded p-2"
      />
      {errors.cargoWeightKg && <p className="text-red-500">{errors.cargoWeightKg}</p>}
      
      <input
        type="text"
        name="originAddress"
        placeholder="Origin Address"
        value={formData.originAddress}
        onChange={handleChange}
        className="w-full border rounded p-2"
      />
      
      <input
        type="text"
        name="destinationAddress"
        placeholder="Destination Address"
        value={formData.destinationAddress}
        onChange={handleChange}
        className="w-full border rounded p-2"
      />
      
      <button
        type="submit"
        className="w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700"
      >
        Create Trip
      </button>
    </form>
  );
};

export default CreateTripForm;</code></div>
                </div>
            </div>
            
            <!-- API Endpoints -->
            <div class="section" id="api-endpoints">
                <h2>ğŸ”Œ API Endpoints Documentation</h2>
                
                <div class="subsection">
                    <h3>Authentication Endpoints</h3>
                    <table>
                        <tr>
                            <th>Endpoint</th>
                            <th>Method</th>
                            <th>Auth</th>
                            <th>Description</th>
                        </tr>
                        <tr>
                            <td>/api/auth/register</td>
                            <td>POST</td>
                            <td>No</td>
                            <td>Register new user</td>
                        </tr>
                        <tr>
                            <td>/api/auth/login</td>
                            <td>POST</td>
                            <td>No</td>
                            <td>Login user, returns JWT token</td>
                        </tr>
                        <tr>
                            <td>/api/auth/refresh</td>
                            <td>POST</td>
                            <td>Yes</td>
                            <td>Refresh access token</td>
                        </tr>
                        <tr>
                            <td>/api/auth/me</td>
                            <td>GET</td>
                            <td>Yes</td>
                            <td>Get current user profile</td>
                        </tr>
                    </table>
                </div>
                
                <div class="subsection">
                    <h3>Vehicle Endpoints</h3>
                    <table>
                        <tr>
                            <th>Endpoint</th>
                            <th>Method</th>
                            <th>Description</th>
                        </tr>
                        <tr>
                            <td>/api/vehicles</td>
                            <td>GET</td>
                            <td>Get all vehicles (with filters)</td>
                        </tr>
                        <tr>
                            <td>/api/vehicles/:id</td>
                            <td>GET</td>
                            <td>Get single vehicle details</td>
                        </tr>
                        <tr>
                            <td>/api/vehicles</td>
                            <td>POST</td>
                            <td>Create new vehicle</td>
                        </tr>
                        <tr>
                            <td>/api/vehicles/:id</td>
                            <td>PUT</td>
                            <td>Update vehicle</td>
                        </tr>
                        <tr>
                            <td>/api/vehicles/:id</td>
                            <td>DELETE</td>
                            <td>Delete vehicle</td>
                        </tr>
                        <tr>
                            <td>/api/vehicles/:id/check-availability</td>
                            <td>GET</td>
                            <td>Check if vehicle is available</td>
                        </tr>
                    </table>
                </div>
                
                <div class="subsection">
                    <h3>Trip Endpoints</h3>
                    <table>
                        <tr>
                            <th>Endpoint</th>
                            <th>Method</th>
                            <th>Description</th>
                        </tr>
                        <tr>
                            <td>/api/trips</td>
                            <td>GET</td>
                            <td>Get all trips with filters</td>
                        </tr>
                        <tr>
                            <td>/api/trips/:id</td>
                            <td>GET</td>
                            <td>Get trip details</td>
                        </tr>
                        <tr>
                            <td>/api/trips</td>
                            <td>POST</td>
                            <td>Create new trip</td>
                        </tr>
                        <tr>
                            <td>/api/trips/:id/validate</td>
                            <td>POST</td>
                            <td>Validate trip before dispatch</td>
                        </tr>
                        <tr>
                            <td>/api/trips/:id/dispatch</td>
                            <td>PUT</td>
                            <td>Dispatch trip to driver</td>
                        </tr>
                        <tr>
                            <td>/api/trips/:id/complete</td>
                            <td>PUT</td>
                            <td>Complete trip</td>
                        </tr>
                        <tr>
                            <td>/api/trips/:id/cancel</td>
                            <td>PUT</td>
                            <td>Cancel trip</td>
                        </tr>
                    </table>
                </div>
                
                <div class="subsection">
                    <h3>Analytics Endpoints</h3>
                    <table>
                        <tr>
                            <th>Endpoint</th>
                            <th>Method</th>
                            <th>Description</th>
                        </tr>
                        <tr>
                            <td>/api/analytics/kpi</td>
                            <td>GET</td>
                            <td>Get fleet KPIs</td>
                        </tr>
                        <tr>
                            <td>/api/analytics/fuel-efficiency/:vehicleId</td>
                            <td>GET</td>
                            <td>Calculate fuel efficiency</td>
                        </tr>
                        <tr>
                            <td>/api/analytics/roi/:vehicleId</td>
                            <td>GET</td>
                            <td>Calculate vehicle ROI</td>
                        </tr>
                        <tr>
                            <td>/api/analytics/driver-performance/:driverId</td>
                            <td>GET</td>
                            <td>Get driver performance metrics</td>
                        </tr>
                        <tr>
                            <td>/api/analytics/financial-report</td>
                            <td>GET</td>
                            <td>Generate financial report</td>
                        </tr>
                    </table>
                </div>
            </div>
            
            <!-- Workflows -->
            <div class="section" id="workflows">
                <h2>ğŸ”„ Business Workflows & Logic</h2>
                
                <div class="subsection">
                    <h3>Trip Lifecycle Workflow</h3>
                    <div class="entity-box">
                        <strong>Phase 1: Creation (Draft)</strong><br>
                        â€¢ User selects vehicle and driver<br>
                        â€¢ System validates: capacity, availability, driver license<br>
                        â€¢ Trip created with status = "Draft"<br><br>
                        
                        <strong>Phase 2: Dispatch</strong><br>
                        â€¢ Dispatcher confirms trip<br>
                        â€¢ Vehicle status â†’ "On Trip"<br>
                        â€¢ Driver status â†’ "On Duty"<br>
                        â€¢ Trip status â†’ "Dispatched"<br>
                        â€¢ Start odometer recorded<br><br>
                        
                        <strong>Phase 3: Completion</strong><br>
                        â€¢ Driver marks trip as complete<br>
                        â€¢ End odometer recorded<br>
                        â€¢ Vehicle status â†’ "Available"<br>
                        â€¢ Driver status â†’ "Off Duty"<br>
                        â€¢ Driver trips_completed incremented<br>
                        â€¢ Fuel efficiency calculated<br><br>
                        
                        <strong>Phase 4: Analytics Update</strong><br>
                        â€¢ Cost per km calculated<br>
                        â€¢ Vehicle ROI updated<br>
                        â€¢ Fleet KPI recalculated<br>
                        â€¢ Notifications sent to managers
                    </div>
                </div>
                
                <div class="subsection">
                    <h3>Maintenance Workflow</h3>
                    <div class="entity-box">
                        <strong>Issue Reported</strong><br>
                        â€¢ Create maintenance log<br>
                        â€¢ Vehicle status â†’ "In Shop"<br>
                        â€¢ Remove from available fleet<br><br>
                        
                        <strong>Service In Progress</strong><br>
                        â€¢ Technician assigned<br>
                        â€¢ Status â†’ "In Progress"<br><br>
                        
                        <strong>Service Complete</strong><br>
                        â€¢ Cost recorded<br>
                        â€¢ Status â†’ "Completed"<br>
                        â€¢ Vehicle status â†’ "Available"<br>
                        â€¢ Can be dispatched again<br>
                        â€¢ Expense logged to financial reports
                    </div>
                </div>
                
                <div class="subsection">
                    <h3>Driver Compliance Rules</h3>
                    <div class="entity-box">
                        âœ… License expiry auto-checked before assignment<br>
                        âœ… Expired license â†’ Auto-suspend driver<br>
                        âœ… Suspended drivers cannot be assigned trips<br>
                        âœ… Safety score calculated: 10 - (complaints Ã— 0.5)<br>
                        âœ… Complaints tracked and auto-logged<br>
                        âœ… Trip completion rate monitored<br>
                        âœ… Real-time safety alerts sent to safety officers
                    </div>
                </div>
            </div>
            
            <!-- Setup & Deployment -->
            <div class="section">
                <h2>ğŸš€ Setup & Deployment Guide</h2>
                
                <div class="subsection">
                    <h3>Backend Setup</h3>
                    <div class="code-block"><code"># 1. Install dependencies
cd backend
npm install

# 2. Set up environment
cp .env.example .env
# Configure: DATABASE_URL, JWT_SECRET, PORT

# 3. Setup Prisma
npx prisma migrate dev --name init

# 4. Seed database (optional)
node prisma/seed.js

# 5. Start server
npm start</code></div>
                </div>
                
                <div class="subsection">
                    <h3>Frontend Setup</h3>
                    <div class="code-block"><code"># 1. Install dependencies
cd frontend
npm install

# 2. Set up environment
cp .env.example .env
# Configure: REACT_APP_API_URL

# 3. Start development server
npm start</code></div>
                </div>
                
                <div class="subsection">
                    <h3>Docker Deployment</h3>
                    <div class="code-block"><code"># Build and run with Docker Compose
docker-compose up -d

# This will:
# - Start PostgreSQL database
# - Run Prisma migrations
# - Start Express backend on port 5000
# - Start React frontend on port 3000</code></div>
                </div>
            </div>
        </div>
        
        <footer>
            <p><strong>FleetFlow - Fleet & Logistics Management System</strong></p>
            <p>Built with Node.js, React, Express, Prisma & PostgreSQL</p>
            <p style="margin-top: 10px; color: #999;">Complete Modern Tech Stack Implementation | 2026</p>
        </footer>
    </div>
</body>
</html>
